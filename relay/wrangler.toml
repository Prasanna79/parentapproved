name = "parentapproved-relay"
main = "src/index.ts"
compatibility_date = "2024-12-01"

[durable_objects]
bindings = [
  { name = "RELAY", class_name = "RelayDurableObject" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["RelayDurableObject"]

# Assets (dashboard HTML/JS/CSS)
[site]
bucket = "./assets"

# Production: relay.parentapproved.tv
[[routes]]
pattern = "relay.parentapproved.tv"
custom_domain = true

[env.staging]
name = "parentapproved-relay-staging"

[env.staging.durable_objects]
bindings = [
  { name = "RELAY", class_name = "RelayDurableObject" }
]

[[env.staging.routes]]
pattern = "staging-relay.parentapproved.tv"
custom_domain = true
